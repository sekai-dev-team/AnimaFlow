services:
  animaflow:
    build:
      context: ..
      dockerfile: deploy/Dockerfile
      args:
        INSTALL_ML: ${INSTALL_ML:-true}
    image: animaflow:latest
    container_name: animaflow
    volumes:
      # Data persistence volumes
      - ../data/db:/app/data/db
      - ../data/uploads:/app/data/uploads
      - ../data/generated:/app/data/generated
      # Model weights (if you want to update them without rebuild)
      - ../sharp/data/model:/app/sharp/data/model
    env_file:
      - .env
